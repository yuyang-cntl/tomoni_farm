<% if @farmer.errors.any? %>
  <div class="alert alert-danger">
    <ul>
      <% @farmer.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
    </ul>
  </div>
<% end %>
<% if flash[:alert] %>
  <div class="alert alert-danger"><%= flash[:alert] %></div>
<% end %>
<% if flash[:notice] %>
  <div class="alert alert-success"><%= flash[:notice] %></div>
<% end %>

<div class="container-fluid">
 <div class="row"> 
  <div class="col-12 col-md-10 mx-auto mt-5">
   <h1 class="mt-5">プロフィール更新</h1>
   <%= form_with model:@farmer, url:farmer_profile_path, scope: :farmer, method: :patch, local: true, html: { multipart: true } do |f| %>
    <div class="field mt-5 mb-3 col-12 col-md-4 offset-md-2">
     <%= f.label :image, "プロフィール画像" %>
     <%= f.file_field :profile_image, class:"form-control-file" %>
    </div>
    <div class="field mb-3 col-12 col-md-2 offset-md-2">
     <%= f.label :name, "名前" %>
    </div>
    <div class="field mb-3 col-12 col-md-8 mx-auto">
     <%= f.text_field :name, autofocus: true, autocomplete: "name", class: "w-100" %>
    </div>

    <div class="field mb-3 col-12 col-md-2 offset-md-2">
     <%= f.label :email, "メールアドレス" %>
    </div>
    <div class="field mb-3 col-12 col-md-8 mx-auto">
     <%= f.email_field :email, autofocus: true, placeholder: "sample@example.com", autocomplete: "email", class: "w-100" %>
    </div>
    <div class="field mb-3 col-12 col-md-2 offset-md-2">
     <%= f.label :introduction, "紹介文" %>
    </div>
    <div class="mb-3 col-12 col-md-8 mx-auto">
     <%= f.text_area :introduction, maxlength: 500, class: "form-control w-100" %>
    </div>
    <%= f.fields_for :location do |loc| %>
     <div class="input-group mb-3 col-12 col-md-2 offset-md-2">
      <%= loc.label :postal_code, "郵便番号" %>
     </div>
     <div class="field mb-3 col-12 col-md-8 mx-auto">
      <%= loc.text_field :postal_code, class: "w-100" %>
     </div>
     <div class="field mb-3 col-12 col-md-2 offset-md-2">
      <%= loc.label :prefecture, "都道府県" %>
     </div>
     <div class="field mb-3 col-12 col-md-8 mx-auto">
      <%= loc.text_field :prefecture, class: "w-100" %>
     </div>
     <div class="field mb-3 col-12 col-md-2 offset-md-2">
      <%= loc.label :city, "市区町村" %>
     </div>
     <div class="field mb-3 col-12 col-md-8 mx-auto">
      <%= loc.text_field :city, class: "w-100" %>
     </div>
     <div class="field mb-3 col-12 col-md-2 offset-md-2">
      <%= loc.label :street, "番地・建物名" %>
     </div>
     <div class="field mb-3 col-12 col-md-8 mx-auto">
      <%= loc.text_field :street, class: "w-100" %>
     </div>
    <% end %>
   <div class="actions d-flex justify-content-center col-md-8 offset-md-2 mt-3">
    <%= f.submit "更新", class: "btn btn-outline-secondary w-25 mt-3" %>
   </div>
   <% end %>
  
   <div class="d-flex justify-content-center col-md-8 offset-md-2 mt-3">
    <%= link_to "パスワード変更", edit_farmer_password_change_path, class: "btn btn-outline-secondary w-25" %>
   </div>

   <div class="d-flex justify-content-center col-md-8 offset-md-2 mt-3">
    <%= link_to "戻る", farmer_root_path, class: "btn btn-outline-secondary w-25" %>
   </div>
  </div>
 </div>
</div>
